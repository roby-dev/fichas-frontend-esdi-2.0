<div class="flex h-screen bg-gray-100" [class.overflow-hidden]="isMobileSidebarOpen()">
  @if(isLoading()){
  <div class="w-full flex items-center justify-center">
    <p>Cargando datos ...</p>
  </div>
  }@else {
  <!-- Sidebar -->
  <app-sidebar
    [isCollapsed]="isSidebarCollapsed()"
    class="hidden md:flex bg-slate-800 text-white transition-all duration-300"
    [ngClass]="{ 'w-64': !isSidebarCollapsed(), 'w-16': isSidebarCollapsed() }"
  >
  </app-sidebar>

  <div class="md:hidden">
    <!-- Backdrop -->
    @if(isMobileSidebarOpen()) {
    <div class="fixed inset-0 z-40 bg-black/40" (click)="closeMobileSidebar()" aria-hidden="true"></div>
    }

    <!-- Drawer -->
    <div
      class="fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 bg-slate-800"
      [ngClass]="{
        '-translate-x-full': !isMobileSidebarOpen(),
        'translate-x-0': isMobileSidebarOpen()
      }"
      style="width: 16rem"
    >
      <!-- Reutilizamos el componente sidebar pero forzamos expanded (no collapsed) dentro del drawer -->
      <app-sidebar class="h-full bg-slate-800 text-white" [isCollapsed]="false"></app-sidebar>
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex flex-col flex-1 overflow-hidden">
    <!-- Header -->
    <app-header
      (toggleSidebarEvent)="toggleSidebar()"
      class="bg-white shadow-sm"
      [committeeName]="committeeState.committee()?.name"
    >
    </app-header>

    <!-- Content Area -->
    <main class="flex-1 overflow-y-auto p-4">
      <router-outlet></router-outlet>
    </main>
  </div>
  }
</div>
